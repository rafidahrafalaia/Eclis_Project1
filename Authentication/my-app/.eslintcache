[{"C:\\Users\\hp\\OneDrive\\Documents\\GitHub\\Eclis_Project1\\Authentication\\my-app\\src\\index.js":"1","C:\\Users\\hp\\OneDrive\\Documents\\GitHub\\Eclis_Project1\\Authentication\\my-app\\src\\reportWebVitals.js":"2","C:\\Users\\hp\\OneDrive\\Documents\\GitHub\\Eclis_Project1\\Authentication\\my-app\\src\\App.js":"3","C:\\Users\\hp\\OneDrive\\Documents\\GitHub\\Eclis_Project1\\Authentication\\my-app\\src\\pages\\Register.js":"4","C:\\Users\\hp\\OneDrive\\Documents\\GitHub\\Eclis_Project1\\Authentication\\my-app\\src\\pages\\Login.js":"5","C:\\Users\\hp\\OneDrive\\Documents\\GitHub\\Eclis_Project1\\Authentication\\my-app\\src\\controller\\auth.js":"6","C:\\Users\\hp\\OneDrive\\Documents\\GitHub\\Eclis_Project1\\Authentication\\my-app\\src\\pages\\Dashboard.js":"7","C:\\Users\\hp\\OneDrive\\Documents\\GitHub\\Eclis_Project1\\Authentication\\my-app\\src\\controller\\protected.route.js":"8"},{"size":507,"mtime":1610456522036,"results":"9","hashOfConfig":"10"},{"size":362,"mtime":499162500000,"results":"11","hashOfConfig":"10"},{"size":801,"mtime":1612949853375,"results":"12","hashOfConfig":"10"},{"size":1299,"mtime":1613575934860,"results":"13","hashOfConfig":"10"},{"size":3037,"mtime":1612949879599,"results":"14","hashOfConfig":"10"},{"size":775,"mtime":1612949981333,"results":"15","hashOfConfig":"10"},{"size":2304,"mtime":1613508718288,"results":"16","hashOfConfig":"10"},{"size":2083,"mtime":1612950027272,"results":"17","hashOfConfig":"10"},{"filePath":"18","messages":"19","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"20","usedDeprecatedRules":"21"},"17bik1n",{"filePath":"22","messages":"23","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"21"},{"filePath":"24","messages":"25","errorCount":0,"warningCount":3,"fixableErrorCount":0,"fixableWarningCount":0,"source":"26","usedDeprecatedRules":"21"},{"filePath":"27","messages":"28","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"29","messages":"30","errorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"31","usedDeprecatedRules":"21"},{"filePath":"32","messages":"33","errorCount":0,"warningCount":5,"fixableErrorCount":0,"fixableWarningCount":0,"source":"34","usedDeprecatedRules":"21"},{"filePath":"35","messages":"36","errorCount":0,"warningCount":9,"fixableErrorCount":0,"fixableWarningCount":0,"source":"37","usedDeprecatedRules":"21"},{"filePath":"38","messages":"39","errorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"40","usedDeprecatedRules":"21"},"C:\\Users\\hp\\OneDrive\\Documents\\GitHub\\Eclis_Project1\\Authentication\\my-app\\src\\index.js",["41"],"import React  from 'react';\nimport ReactDOM from 'react-dom';\n// import './index.css';\nimport App from './App';\nimport reportWebVitals from './reportWebVitals';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\n// reportWebVitals();\n",["42","43"],"C:\\Users\\hp\\OneDrive\\Documents\\GitHub\\Eclis_Project1\\Authentication\\my-app\\src\\reportWebVitals.js",[],"C:\\Users\\hp\\OneDrive\\Documents\\GitHub\\Eclis_Project1\\Authentication\\my-app\\src\\App.js",["44","45","46"],"// import logo from './logo.svg';\nimport Axios from 'axios';\nimport './App.css';\nimport React, {useEffect,useState} from 'react';\nimport Register from './pages/Register';\nimport Login from './pages/Login';\nimport Dashboard from './pages/Dashboard';\nimport { ProtectedRoute } from \"./controller/protected.route\";\nimport { BrowserRouter as Router, Route, Switch } from \"react-router-dom\";\nfunction App() {\n  return (\n    <Router>\n    <div className=\"App\">\n      {/* <Register/> */}\n      <Switch>\n        {/* <Route path=\"/\" exact component={Register}/>  */}\n        <Route exact path=\"/\" component={Register} />\n        <ProtectedRoute path=\"/dashboard\" component={Dashboard}/>\n        <Route path=\"/login\" exact component={Login}/>\n      </Switch>\n    </div>\n    </Router>\n  );\n}\n\nexport default App;\n","C:\\Users\\hp\\OneDrive\\Documents\\GitHub\\Eclis_Project1\\Authentication\\my-app\\src\\pages\\Register.js",[],"C:\\Users\\hp\\OneDrive\\Documents\\GitHub\\Eclis_Project1\\Authentication\\my-app\\src\\pages\\Login.js",["47","48"],"// import logo from './logo.svg';\r\nimport React, {useEffect,useState} from 'react';\r\nimport '../App.css';\r\nimport Axios from 'axios';\r\nimport {Link} from 'react-router-dom';\r\nimport { Redirect } from \"react-router-dom\";\r\nimport auth from \"../controller/auth\";\r\nimport { useHistory } from \"react-router-dom\";\r\n// redirect = () => {\r\n//   window.location.href = 'http://localhost:3001/api/login-sso';\r\n//   // maybe can add spinner while loading\r\n//   return null;\r\n// }\r\n\r\nfunction Login() {\r\n  // let state = { redirect: null };\r\n  const [email,setEmail] = useState(\"\");\r\n  const [userPassword,setUserPassword] = useState(\"\");\r\n  const [loginStatus, setLoginStatus] = useState(\"\");\r\n  let history = useHistory();\r\n  Axios.defaults.withCredentials = true;\r\n\r\n  const loginUser=props=>{\r\n    Axios.post('http://localhost:3001/api/loginUser',{\r\n      email:email,\r\n      userPassword:userPassword}).then((response)=>{ \r\n        console.log(response);\r\n        if (response.data.message) {\r\n        setLoginStatus(response.data.message);\r\n        } \r\n        else {\r\n        setLoginStatus(response.data.session.email);\r\n        auth.login(() => {\r\n          history.push(\"/dashboard\");\r\n        });\r\n      }\r\n      });\r\n  };\r\n\r\n  // useEffect(() => {\r\n  //   Axios.get(\"http://localhost:3001/api/loginUser\").then((response) => {\r\n  //   if (response.data.session) {\r\n  //       setLoginStatus(true);\r\n  //       console.log(loginStatus,\"status\")\r\n  //  }\r\n  //   });\r\n  // }, []);\r\n\r\n\r\n//   if (loginStatus) {\r\n//     // window.location.replace('http://localhost:3001/api/login-sso') // return <Redirect to='http://localhost:3001/api/login-sso'  />\r\n//     // fetch(\"http://localhost:3001/api/login-sso\")\r\n//   }else{\r\n//     window.location.replace('http://localhost:3001/api/login-sso').then((response)=>{\r\n//       if (response.data.loggedIn === true) {\r\n//         window.location.replace('http://localhost:3000/login')\r\n//         setLoginStatus(response.data.user[0].role);\r\n//       }\r\n//     });\r\n//   }\r\n\r\n//   //sso-login\r\n  const loginSSO=()=>{\r\n  if (loginStatus) {\r\n  }else{\r\n    window.location.replace('http://localhost:3001/api/login-sso')\r\n    // .then((response)=>{\r\n    //   if (response.data.loggedIn === true) {\r\n    //     window.location.replace('http://localhost:3000/login')\r\n    //     setLoginStatus(response.data.user[0].role);\r\n    //   }\r\n    // });\r\n  }\r\n }\r\n\r\n  return (\r\n    \r\n    <div className=\"Login\">\r\n     <div className=\"form\">\r\n       <h1>Login</h1>\r\n       <input type=\"text\" name=\"email\" onChange={(e)=> {\r\n         setEmail(e.target.value)\r\n       }}>\r\n       </input>\r\n       <input type=\"password\" name=\"password\" onChange={(e)=> {\r\n         setUserPassword(e.target.value)\r\n       }}>\r\n       </input>\r\n       <button onClick={loginUser}>Submit</button>\r\n       <br></br>\r\n       <button onClick={loginSSO}>Login SSO UI</button>\r\n       <p>{loginStatus}</p>\r\n     </div>\r\n     Click <Link to='/'>here</Link> to Register\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default Login;\r\n// export default render;\r\n","C:\\Users\\hp\\OneDrive\\Documents\\GitHub\\Eclis_Project1\\Authentication\\my-app\\src\\controller\\auth.js",["49","50","51","52","53"],"import React, {useEffect,useState} from 'react';\r\nimport '../App.css';\r\nimport Axios from 'axios';\r\nimport {Link} from 'react-router-dom';\r\nimport { Redirect } from \"react-router-dom\";\r\n\r\nAxios.defaults.withCredentials = true;\r\nclass Auth {\r\n    constructor() {\r\n      this.authenticated = false;\r\n      this.authenticatedSSO = false;\r\n    }\r\n  \r\n    login(cb) {\r\n      this.authenticated = true;\r\n      cb();\r\n  }\r\n    loginSSO(cb) {\r\n      this.authenticatedSSO = true;\r\n      cb();\r\n    }\r\n  \r\n    logout(cb) {\r\n      this.authenticated = false;\r\n      cb();\r\n    }\r\n  \r\n    isAuthenticated() {   \r\n      return this.authenticated;\r\n    }\r\n    \r\n\r\n    isAuthenticatedSSO() {   \r\n      return this.authenticatedSSO;\r\n    }\r\n    \r\n\r\n  }\r\n  \r\n  export default new Auth();\r\n  ","C:\\Users\\hp\\OneDrive\\Documents\\GitHub\\Eclis_Project1\\Authentication\\my-app\\src\\pages\\Dashboard.js",["54","55","56","57","58","59","60","61","62"],"// import logo from './logo.svg';\r\nimport React, {useEffect,useState} from 'react';\r\nimport '../App.css';\r\nimport Axios from 'axios';\r\nimport {Link} from 'react-router-dom';\r\nimport { Redirect } from \"react-router-dom\";\r\nimport loginStatus from \"./Login\";\r\nimport auth from '../controller/auth';\r\nimport { useHistory } from \"react-router-dom\";\r\n\r\n\r\nfunction Dashboard() {\r\n  \r\n  Axios.defaults.withCredentials = true;\r\n  const [email,setEmail] = useState(\"\");\r\n  const [userPassword,setUserPassword] = useState(\"\");\r\n  const [loginStatus, setLoginStatus] = useState(\"\");\r\n\r\n  let history = useHistory();\r\n  // useEffect(() => {\r\n  //   Axios.post(\"http://localhost:3001/api/loginSSO\").then((response) => {\r\n  //     if (response.data.loggedIn === true) {\r\n  //       setLoginStatus(response.data.user[0].role);\r\n  //     }\r\n  //   });\r\n  // }, []);\r\n\r\n  // useEffect(() => {\r\n  //   Axios.get(\"http://localhost:3001/api/loginUser\").then((response) => {\r\n  //     if (response.data.loggedIn === true) {\r\n  //       setLoginStatus(response.data.session);\r\n  //     }else\r\n  //     window.location.replace('http://localhost:3000/login')\r\n  //   });\r\n  // }, []);\r\n  const LogoutSSO=()=>{\r\n    Axios.delete('http://localhost:3001/api/logout', { } , { withCredentials: true }).then((response)=>{ \r\n        \r\n    \r\n  });\r\n    window.location.replace('http://localhost:3001/api/logout-sso').then((response) =>{\r\n      setLoginStatus(false);\r\n      window.location.replace('http://localhost:3000/login')\r\n    })\r\n    auth.logout(() => {\r\n      history.push(\"/login\");\r\n    });\r\n  };\r\n\r\n  const Logout=()=>{\r\n    Axios.delete('http://localhost:3001/api/logout', { } , { withCredentials: true }).then((response)=>{ \r\n        \r\n    \r\n      });console.log(\"test\");\r\n      auth.logout(() => {\r\n        history.push(\"/login\");\r\n      });\r\n  };\r\n  return (\r\n    \r\n    <div className=\"Login\">\r\n     <div className=\"form\">\r\n       <h1>You Are Logged In</h1> \r\n       <div>\r\n        {auth.authenticatedSSO\r\n        ? \r\n         <button onClick={LogoutSSO} >Logout SSO</button>\r\n         : \r\n        <button onClick={Logout} >Logout</button>\r\n          } \r\n        </div>\r\n       {/* <button onClick={LogoutSSO}>Logout</button> */}\r\n     </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default Dashboard;\r\n// export default render;\r\n","C:\\Users\\hp\\OneDrive\\Documents\\GitHub\\Eclis_Project1\\Authentication\\my-app\\src\\controller\\protected.route.js",["63","64"],"import React,{useEffect,useState} from \"react\";\r\nimport { Route, Redirect } from \"react-router-dom\";\r\nimport auth from \"./auth\";\r\nimport Axios from 'axios';\r\nimport {Link} from 'react-router-dom';\r\nimport { useHistory } from \"react-router-dom\";\r\n\r\nAxios.defaults.withCredentials = true;\r\n  \r\nexport function ProtectedRoute({\r\n  // isAuth:isAuth,\r\n  component: Component,\r\n  ...rest\r\n}) {\r\n  const state = {\r\n  products: [],\r\n  loading: true\r\n}\r\n  let history = useHistory();\r\n  const [loginStatus, setLoginStatus] = useState(state);\r\n\r\n  useEffect(() => {\r\n    // const login=()=>{\r\n    Axios.get(\"http://localhost:3001/api/loginUser\").then((response) => {\r\n      if (response.data.loggedIn === true) {\r\n        console.log(\"its true login\")\r\n        const data=response.data.loggedIn\r\n        // setLoginStatus(true);\r\n        setLoginStatus({\r\n          loading: false,\r\n          data,\r\n        }); \r\n        if(response.data.sessionSSO){\r\n          auth.loginSSO(() => {\r\n            history.push(\"/dashboard\");\r\n        });\r\n        }\r\n        // else{\r\n          auth.login(() => {\r\n            history.push(\"/dashboard\");\r\n          });  \r\n        // }\r\n        console.log(\"login\",loginStatus)\r\n      }\r\n      else {\r\n        console.log(\"its false login\")\r\n      // setLoginStatus(false);\r\n        const data=false;\r\n        setLoginStatus({\r\n        loading: false,\r\n        data,\r\n      });\r\n      console.log(\"login\",loginStatus)\r\n      }\r\n  });\r\n  }, \r\n  []);\r\n  return (\r\n  <Route\r\n    {...rest}\r\n    render={props => {\r\n      // console.log(login)\r\n      const { data, loading } = loginStatus;\r\n      // console.log(datasso,\"test\")\r\n      if(loading) return \"loading...\"\r\n      else{\r\n      if (data) {\r\n        console.log(\"test\",auth.isAuthenticated)\r\n        return <Component {...props} />;\r\n      }\r\n       else{\r\n        return (\r\n          <Redirect\r\n            to={{\r\n              pathname: \"/login\",\r\n              state: {\r\n                from: props.location\r\n              }\r\n            }}\r\n          />\r\n        );\r\n      }\r\n    }\r\n    }}\r\n  />\r\n);\r\n}",{"ruleId":"65","severity":1,"message":"66","line":5,"column":8,"nodeType":"67","messageId":"68","endLine":5,"endColumn":23},{"ruleId":"69","replacedBy":"70"},{"ruleId":"71","replacedBy":"72"},{"ruleId":"65","severity":1,"message":"73","line":2,"column":8,"nodeType":"67","messageId":"68","endLine":2,"endColumn":13},{"ruleId":"65","severity":1,"message":"74","line":4,"column":16,"nodeType":"67","messageId":"68","endLine":4,"endColumn":25},{"ruleId":"65","severity":1,"message":"75","line":4,"column":26,"nodeType":"67","messageId":"68","endLine":4,"endColumn":34},{"ruleId":"65","severity":1,"message":"74","line":2,"column":16,"nodeType":"67","messageId":"68","endLine":2,"endColumn":25},{"ruleId":"65","severity":1,"message":"76","line":6,"column":10,"nodeType":"67","messageId":"68","endLine":6,"endColumn":18},{"ruleId":"65","severity":1,"message":"77","line":1,"column":8,"nodeType":"67","messageId":"68","endLine":1,"endColumn":13},{"ruleId":"65","severity":1,"message":"74","line":1,"column":16,"nodeType":"67","messageId":"68","endLine":1,"endColumn":25},{"ruleId":"65","severity":1,"message":"75","line":1,"column":26,"nodeType":"67","messageId":"68","endLine":1,"endColumn":34},{"ruleId":"65","severity":1,"message":"78","line":4,"column":9,"nodeType":"67","messageId":"68","endLine":4,"endColumn":13},{"ruleId":"65","severity":1,"message":"76","line":5,"column":10,"nodeType":"67","messageId":"68","endLine":5,"endColumn":18},{"ruleId":"65","severity":1,"message":"74","line":2,"column":16,"nodeType":"67","messageId":"68","endLine":2,"endColumn":25},{"ruleId":"65","severity":1,"message":"78","line":5,"column":9,"nodeType":"67","messageId":"68","endLine":5,"endColumn":13},{"ruleId":"65","severity":1,"message":"76","line":6,"column":10,"nodeType":"67","messageId":"68","endLine":6,"endColumn":18},{"ruleId":"65","severity":1,"message":"79","line":7,"column":8,"nodeType":"67","messageId":"68","endLine":7,"endColumn":19},{"ruleId":"65","severity":1,"message":"80","line":15,"column":10,"nodeType":"67","messageId":"68","endLine":15,"endColumn":15},{"ruleId":"65","severity":1,"message":"81","line":15,"column":16,"nodeType":"67","messageId":"68","endLine":15,"endColumn":24},{"ruleId":"65","severity":1,"message":"82","line":16,"column":10,"nodeType":"67","messageId":"68","endLine":16,"endColumn":22},{"ruleId":"65","severity":1,"message":"83","line":16,"column":23,"nodeType":"67","messageId":"68","endLine":16,"endColumn":38},{"ruleId":"65","severity":1,"message":"84","line":17,"column":10,"nodeType":"67","messageId":"68","endLine":17,"endColumn":21},{"ruleId":"65","severity":1,"message":"78","line":5,"column":9,"nodeType":"67","messageId":"68","endLine":5,"endColumn":13},{"ruleId":"85","severity":1,"message":"86","line":57,"column":3,"nodeType":"87","endLine":57,"endColumn":5,"suggestions":"88"},"no-unused-vars","'reportWebVitals' is defined but never used.","Identifier","unusedVar","no-native-reassign",["89"],"no-negated-in-lhs",["90"],"'Axios' is defined but never used.","'useEffect' is defined but never used.","'useState' is defined but never used.","'Redirect' is defined but never used.","'React' is defined but never used.","'Link' is defined but never used.","'loginStatus' is defined but never used.","'email' is assigned a value but never used.","'setEmail' is assigned a value but never used.","'userPassword' is assigned a value but never used.","'setUserPassword' is assigned a value but never used.","'loginStatus' is assigned a value but never used.","react-hooks/exhaustive-deps","React Hook useEffect has missing dependencies: 'history' and 'loginStatus'. Either include them or remove the dependency array.","ArrayExpression",["91"],"no-global-assign","no-unsafe-negation",{"desc":"92","fix":"93"},"Update the dependencies array to be: [history, loginStatus]",{"range":"94","text":"95"},[1468,1470],"[history, loginStatus]"]